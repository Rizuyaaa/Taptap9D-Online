<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Taptap 9D Online</title>
<style>
    * {
      box-sizing: border-box;
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
    }

    
body {
  background: linear-gradient(135deg, #1e3c72, #2a5298);
  color: white;
  text-align: center;
  padding: 20px;
}

    h1 {
      font-size: 2.5em;
      margin-bottom: 20px;
    }

    #click-img {
      width: 200px;
      height: 200px;
      border-radius: 20px;
      cursor: pointer;
      transition: transform 0.1s;
      -webkit-user-select: none;
      -webkit-touch-callout: none;
      -webkit-tap-highlight-color: transparent;
      outline: none;
    }

    #click-img:active {
      transform: scale(0.95);
    }

    #score {
      font-size: 2em;
      margin: 20px 0;
    }

    .shop, .inventory {
      margin-top: 30px;
      padding: 10px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
    }

    .skin {
      margin: 10px;
      display: inline-block;
      padding: 10px;
      background: #34495e;
      border-radius: 10px;
    }

    button {
      margin-top: 10px;
      padding: 5px 10px;
      border: none;
      background: #1abc9c;
      color: white;
      font-weight: bold;
      border-radius: 5px;
      cursor: pointer;
    }

    button:disabled {
      background: gray;
      cursor: not-allowed;
    }

    img.skin-preview {
      width: 50px;
      height: 50px;
      border-radius: 10px;
      display: block;
      margin: 0 auto 5px;
    }

    .effect {
      position: absolute;
      pointer-events: none;
      z-index: 1000;
      animation: fadeOut 1s forwards;
    }

    @keyframes fadeOut {
      0% { opacity: 1; }
      100% { opacity: 0; transform: scale(2); }
    }

    .dev {
      margin-top: 30px;
      padding: 10px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
    }
  

body {
  background: linear-gradient(135deg, #1e3c72, #2a5298);
  color: white;
  text-align: center;
  padding: 20px;
}

@keyframes bgmove {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

h1 {
  text-shadow: 2px 2px 5px #000;
  font-family: 'Segoe UI', sans-serif;
}

#click-img {
  box-shadow: 0 0 25px rgba(255,255,255,0.5);
  border: 3px solid #fff;
  transition: transform 0.15s ease-in-out, box-shadow 0.3s;
}
#click-img:hover {
  transform: scale(1.05);
  box-shadow: 0 0 35px rgba(255,255,255,0.7);
}

button {
  background: linear-gradient(to right, #00c6ff, #0072ff);
  box-shadow: 0 4px 15px rgba(0,0,0,0.3);
  font-size: 1em;
  border-radius: 30px;
  padding: 10px 20px;
}
button:hover {
  transform: scale(1.05);
  background: linear-gradient(to right, #0072ff, #00c6ff);
}

.shop, .inventory, .leaderboard, .dev {
  background: rgba(255, 255, 255, 0.05);
  border: 2px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 0 20px rgba(0,0,0,0.2);
  border-radius: 15px;
}

.skin {
  background: #3b3f58;
  transition: transform 0.2s;
}
.skin:hover {
  transform: scale(1.05);
  background: #4e5370;
}

.effect {
  text-shadow: 2px 2px 5px #000;
  font-size: 40px;
}

@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

* {
  font-family: 'Press Start 2P', monospace !important;
}

h1, h2, h4, button, .skin, .inventory, .shop, .leaderboard {
  text-shadow: 1px 1px 0 #000;
  letter-spacing: 1px;
}

#click-img {
  image-rendering: pixelated;
  border: 4px solid #fff;
  box-shadow: 0 0 10px #00ffe0;
}

button {
  border: 2px dashed #fff;
  box-shadow: 0 0 8px #00c6ff;
  text-transform: uppercase;
}

.skin {
  border: 2px solid #00c6ff;
  background: #2b3e5a;
}

.skin:hover {
  background: #3d537a;
}


body {
  background: linear-gradient(135deg, #1e3c72, #2a5298);
  color: white;
  text-align: center;
  padding: 20px;
}

.leaderboard {
  border: 3px double #00ffff;
  background: rgba(0, 0, 0, 0.4);
  padding: 15px;
  box-shadow: inset 0 0 10px #00ffff;
}

.leaderboard h2 {
  color: #00ffff;
  margin-bottom: 10px;
}

#leaderboard-list {
  text-align: left;
  font-size: 0.8em;
  background: rgba(255, 255, 255, 0.05);
  padding: 10px;
  border-radius: 10px;
  list-style: decimal-leading-zero;
}

.shop, .inventory {
  margin-top: 30px;
  padding: 20px;
  background: rgba(255, 255, 255, 0.08);
  border-radius: 20px;
  border: 2px solid rgba(255, 255, 255, 0.15);
  box-shadow: 0 4px 20px rgba(0, 255, 255, 0.1);
  backdrop-filter: blur(4px);
  transition: 0.3s ease;
}
.shop:hover, .inventory:hover {
  background: rgba(255, 255, 255, 0.13);
  box-shadow: 0 6px 25px rgba(0, 255, 255, 0.2);
}

.shop h2, .inventory h2 {
  font-size: 1.4em;
  color: #ffffff;
  margin-bottom: 12px;
  text-shadow: 1px 1px 4px #000;
}

.shop, .inventory {
  margin-top: 40px;
  padding: 25px;
  background: rgba(255, 255, 255, 0.06);
  border-radius: 20px;
  border: 2px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  position: relative;
}

.shop::before, .inventory::before {
  content: "";
  position: absolute;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  background: linear-gradient(45deg, #00c6ff, #0072ff);
  border-radius: 22px;
  z-index: -1;
  filter: blur(15px);
  opacity: 0.3;
}

.shop:hover, .inventory:hover {
  background: rgba(255, 255, 255, 0.1);
  box-shadow: 0 10px 30px rgba(0, 255, 255, 0.25);
}

.shop h2, .inventory h2 {
  font-size: 1.6em;
  color: #ffffff;
  margin-bottom: 18px;
  text-shadow: 2px 2px 4px #000;
}
</style>
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
    import { getFirestore, collection, setDoc, doc, getDoc, query, orderBy, limit, onSnapshot, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAADSTvAsT27160HmAHa3zs9N-Vtdh1VNY",
      authDomain: "taptap9d.firebaseapp.com",
      projectId: "taptap9d",
      storageBucket: "taptap9d.firebasestorage.app",
      messagingSenderId: "233755582996",
      appId: "1:233755582996:web:916db8e4cc843f945afd01",
      measurementId: "G-X5TLP0WVZB"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const leaderboardList = document.getElementById('leaderboard-list');

    const leaderboardQuery = query(
      collection(db, "leaderboard"),
      orderBy("score", "desc"),
      limit(10)
    );

    onSnapshot(leaderboardQuery, (snapshot) => {
      leaderboardList.innerHTML = '';
      snapshot.forEach(doc => {
        const data = doc.data();
        const li = document.createElement('li');
        li.textContent = `${data.name}: ${data.score}`;
        leaderboardList.appendChild(li);
      });
    });

    window.sendScore = async () => {
      const today = new Date().toISOString().split('T')[0];
      if (localStorage.getItem('lastSubmitDate') === today) {
        alert('Kamu sudah mengirim skor hari ini. Coba lagi besok!');
        return;
      }

      const name = prompt("Masukkan nama kamu:");
      if (!name) return;

      const userRef = doc(db, "leaderboard", name);
      const userSnap = await getDoc(userRef);

      if (userSnap.exists()) {
        const oldScore = userSnap.data().score;
        if (score > oldScore) {
          await setDoc(userRef, { name, score, updatedAt: serverTimestamp() });
          alert("Skor kamu diperbarui di leaderboard!");
        } else {
          alert("Skormu lebih kecil dari sebelumnya!");
        }
      } else {
        await setDoc(userRef, { name, score, updatedAt: serverTimestamp() });
        alert("Skor berhasil dikirim ke leaderboard!");
      }

      localStorage.setItem('lastSubmitDate', today);
    };
  



function showGifPopup() {
  const gif = document.createElement('img');
  gif.src = "GIFfibri.gif"; // Replace with your own if needed
  gif.style.position = 'fixed';
  gif.style.bottom = "20px";
gif.style.right = "20px";
gif.style.top = "";
gif.style.left = "";
gif.style.transform = "";
  gif.style.width = '200px';
  gif.style.zIndex = 9999;
  gif.style.border = '4px solid white';
  gif.style.borderRadius = '12px';
  gif.style.boxShadow = '0 0 20px rgba(255,255,255,0.6)';
  document.body.appendChild(gif);
  setTimeout(() => gif.remove(), 8000);
}

</script>
</head>
<body>
<h1>Taptap 9D Online</h1>
<img alt="click" id="click-img" src="https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif"/>
<div id="score">Score: 0</div>
<div id="stats" style="margin: 10px 0; font-size: 0.9em;">
  <p>Total Klik: <span id="total-clicks">0</span></p>
  <p>Total Critical: <span id="total-critical">0</span></p>
  <p>Skin Favorit: <span id="fav-skin">-</span></p>
<p>Rata-rata Skor/Klik: <span id="avg-score">0</span></p>
</div>
<button onclick="sendScore()">Kirim Skor ke LeaderboardüèÜ</button>
<button id="mute-button">Matikan Suaraüîä</button>
<div class="shop" id="shop-skins">
<h2>Toko Skin</h2>
<div class="skin" data-cost="500" data-skin="aldi" data-sound="popsound.mp3">
<img alt="aldi" class="skin-preview" src="aldiinpomabar.jpg"/>
      Aldi Info Mabar (500 skor)<br/>
<button>Beli</button>
</div>
<div class="skin" data-cost="1000" data-skin="fibri" data-sound="popsound.mp3">
<img alt="fibri" class="skin-preview" src="perjalananfibri.jpg"/>
      Perjalanan Fibri (1000 skor)<br/>
<button>Beli</button>
</div>
<div class="skin" data-cost="1500" data-effect="egg" data-skin="afdan" data-sound="popsound.mp3">
<img alt="afdan" class="skin-preview" src="afdanhintalu.jpg"/>
      Afdan Mode Hintalu (1500 skor)<br/>
<button>Beli</button>
</div>
<div class="skin" data-cost="2000" data-effect="thunder" data-skin="noval" data-sound="popsound.mp3">
<img alt="noval" class="skin-preview" src="novalzeusmts.jpg"/>
      Noval Zeus MTS (2000 skor)<br/>
<button>Beli</button>
</div>
<div class="skin" data-cost="3000" data-effect="fire" data-skin="iyan" data-sound="motor.mp3">
<img alt="iyan" class="skin-preview" src="iyanracing.jpg"/>
      Iyan Racing (3000 skor)<br/>
<button>Beli</button>
</div>
<div class="skin" data-cost="1000" data-skin="ridho" data-sound="ngorok.mp3">
<img alt="ridho" class="skin-preview" src="ridhoguring.jpg"/>
      Ridho Guring (1000 skor)<br/>
<button>Beli</button>
</div>
<p>Beberapa skin punya efek dan suara saat diklik!</p><p style="margin-top:10px;font-size:1em;">üí• Skin Noval, Iyan, Tama, dan Atmin memberi +5 skor per klik!</p></div><div class="shop"><h2>Skin Achievement</h2>
<div class="skin">
<img alt="tama" class="skin-preview" src="tama patapim.jpg"/>
      Tama Patapim (Achievement)<br/>
<small>Dapatkan 3500 skor dengan skin Aldi Info Mabar</small>
</div>
<div class="skin">
<img alt="atmin" class="skin-preview" src="atminpuisi.jpg"/>
      Atmin Puisi (Achievement)<br/>
<small>Dapatkan 10000 skor dengan skin Noval Zeus MTS</small>
</div>
</div>
<div class="inventory">
<h2>Inventory Skin</h2>
<div id="inventory-list">Belum ada skin.</div>
</div>
<div class="leaderboard">
<h2>Leaderboard</h2>
<ol id="leaderboard-list">Loading...</ol>
</div>
<div class="dev">
<div><h4>Dev : Rizky,GPT</h4></div>
</div>
<script>
  let score = parseInt(localStorage.getItem('score')) || 0;
    let scoreWithCurrentSkin;
let clickSound = new Audio();
  const scoreEl = document.getElementById('score');
  const clickImg = document.getElementById('click-img');
  const inventoryList = document.getElementById('inventory-list');
  
  let isMuted = localStorage.getItem('muted') === '1';

  const soundBtn = document.getElementById('mute-button');
soundBtn.textContent = isMuted ? 'Aktifkan Suaraüîä' : 'Matikan Suaraüîà';
soundBtn.onclick = toggleSound;
function toggleSound() {
    isMuted = !isMuted;
    localStorage.setItem('muted', isMuted ? '1' : '0');
    soundBtn.textContent = isMuted ? 'Aktifkan Suaraüîä' : 'Matikan Suaraüîà';
  }

  const defaultSkin = {
    name: 'default',
    img: 'https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif',
    sound: 'popsound.mp3',
    effect: ''
  };

  const effectImages = {
    egg: 'ü•ö',
    thunder: '‚ö°',
    fire: 'üî•',
    'üå≥': 'üå≥',
    'üò≠': 'üò≠'
  };

  let ownedSkins = JSON.parse(localStorage.getItem('ownedSkins')) || [defaultSkin];
  let currentSkin = localStorage.getItem('currentSkin') || 'default';
scoreWithCurrentSkin = parseInt(localStorage.getItem('scoreWithCurrentSkin')) || 0;

  function saveGame() {
      localStorage.setItem('scoreWithCurrentSkin', scoreWithCurrentSkin);
    localStorage.setItem('score', score);
    localStorage.setItem('ownedSkins', JSON.stringify(ownedSkins));
    localStorage.setItem('currentSkin', currentSkin);
  }

  function playEffect(name) {
    if (!effectImages[name]) return;
    const span = document.createElement('span');
    span.className = 'effect';
    span.style.left = Math.random() * window.innerWidth + 'px';
    span.style.top = Math.random() * window.innerHeight + 'px';
    span.style.fontSize = '40px';
    span.textContent = effectImages[name];
    document.body.appendChild(span);
    setTimeout(() => span.remove(), 1000);
  }

  clickImg.addEventListener('click', () => {
  let isCritical = Math.random() < 0.1; // 10% chance
  totalClicks++;
  skinUsage[currentSkin] = (skinUsage[currentSkin] || 0) + 1;
  if (isCritical) totalCritical++;
  updateStatsUI();
  localStorage.setItem("totalClicks", totalClicks);
  localStorage.setItem("totalCritical", totalCritical);
  localStorage.setItem("skinUsage", JSON.stringify(skinUsage));
  let criticalText = ""; 
    let scoreToAdd = 1;
  if (isCritical) {
    scoreToAdd *= 5;
    criticalText = "üí• CRITICAL! +" + scoreToAdd;
  }
const buffedSkins = ["iyan", "noval", "tama", "atmin"];
if (buffedSkins.includes(currentSkin)) {
  scoreToAdd = 5;
}
score += scoreToAdd;
  quoteCounter++;
  if (quoteCounter % 20 === 0) showFunnyQuote();
  if (quoteCounter % 100 === 0) showGifPopup();
  
if (isCritical) {
    const crit = document.createElement('div');
    crit.textContent = criticalText;
    crit.style.position = 'absolute';
    crit.style.left = (clickImg.getBoundingClientRect().left + 50) + 'px';
    crit.style.top = (clickImg.getBoundingClientRect().top - 20) + 'px';
    crit.style.fontSize = '20px';
    crit.style.fontFamily = '"Press Start 2P", monospace';
    crit.style.fontWeight = 'bold';
    crit.style.color = '#00ffff';
    crit.style.textShadow = '0 0 6px #00ffff, 0 0 12px #0088ff';
    crit.style.animation = 'fadeOut 1s forwards';
    document.body.appendChild(crit);
    setTimeout(() => crit.remove(), 1000);
}

if (currentSkin) scoreWithCurrentSkin += scoreToAdd;
      checkAchievements();
    scoreEl.textContent = 'Score: ' + score;
  updateSkinScoreDisplay();

    const skin = ownedSkins.find(s => s.name === currentSkin);
    if (skin) {
      if (!isMuted && skin.sound) {
        try {
        clickSound.src = skin.sound;
        clickSound.play().catch(e => console.warn("Audio play error:", e));
      } catch (e) {
        console.warn("Audio load error:", e);
      }
      }
      if (skin.effect) {
        playEffect(skin.effect);
      }
    } else {
      if (!isMuted) {
        try {
  clickSound.src = "popsound.mp3";
  clickSound.play().catch(e => console.warn("Fallback audio error:", e));
} catch (e) {
  console.warn("Fallback audio load failed:", e);
}
      }
    }

    updateSkinScoreDisplay();
    saveGame();
  });

  document.querySelectorAll('#shop-skins .skin').forEach(skinDiv => {
    const btn = skinDiv.querySelector('button');
    btn.addEventListener('click', () => {
      const cost = parseInt(skinDiv.dataset.cost);
      const skinName = skinDiv.dataset.skin;
      const skinImg = skinDiv.querySelector('img').src;
      let sound = skinDiv.getAttribute('data-sound');
if (!sound && ['aldi','fibri','afdan'].includes(skinDiv.dataset.skin)) {
  sound = 'popsound.mp3';
}
      const effect = skinDiv.dataset.effect;

      if (score >= cost) {
        if (ownedSkins.find(s => s.name === skinName)) {
          alert('Skin ini sudah kamu miliki.');
          return;
        }
        score -= cost;
        scoreEl.textContent = 'Score: ' + score;
  updateSkinScoreDisplay();
        ownedSkins.push({
  name: skinName,
  img: skinImg,
  sound: sound || 'popsound.mp3',
  effect
});
        updateInventory();
        alert('Berhasil membeli skin: ' + skinName);
        updateSkinScoreDisplay();
    saveGame();
      } else {
        alert('Skor tidak cukup!');
      }
    });
  });

  function updateInventory() {
    inventoryList.innerHTML = '';
    ownedSkins.forEach(skin => {
      const btn = document.createElement('button');
      btn.innerHTML = `<img src="${skin.img}" width="30"> Pilih ${skin.name}`;
      
btn.onclick = () => {
  // Simpan skor skin lama
  const allScores = JSON.parse(localStorage.getItem('skinScores') || '{}');
  allScores[currentSkin] = scoreWithCurrentSkin;

  clickImg.src = skin.img;
  currentSkin = skin.name;

  // Ambil skor skin baru
  scoreWithCurrentSkin = allScores[currentSkin] || 0;
  localStorage.setItem('skinScores', JSON.stringify(allScores));


  // Fallback if sound is missing
  if (!skin.sound) {
    skin.sound = 'popsound.mp3';
  }

  updateSkinScoreDisplay();
  saveGame();
};

      inventoryList.appendChild(btn);
    });
    if (ownedSkins.length === 0) {
      inventoryList.textContent = 'Belum ada skin.';
    }
  }

  
    const achievementSkins = [
      {
        requiredSkin: "aldi",
        requiredScore: 3500,
        name: "tama",
        img: "tama patapim.jpg",
        sound: "tamzbrainrot.mp3",
        effect: "üå≥"
      },
      {
        requiredSkin: "noval",
        requiredScore: 10000,
        name: "atmin",
        img: "atminpuisi.jpg",
        sound: "siatminpuisi.mp3",
        effect: "üò≠"
      }
    ];
function checkAchievements() {
      achievementSkins.forEach(ach => {
        if (
          currentSkin === ach.requiredSkin &&
          scoreWithCurrentSkin >= ach.requiredScore &&
          !ownedSkins.find(s => s.name === ach.name)
        ) {
          

ownedSkins.push({ ...ach });
alert("Kamu mendapatkan skin achievement: " + ach.name);
currentSkin = ach.name;
clickImg.src = ach.img;
scoreWithCurrentSkin = 0;
updateInventory();
updateSkinScoreDisplay();
saveGame();


        }
      });
    }


  const skinScoreEl = document.createElement('div');
  skinScoreEl.id = "skin-score";
  skinScoreEl.style.marginBottom = "10px";
  skinScoreEl.style.fontSize = "1.2em";
  document.getElementById('score').after(skinScoreEl);

  function updateSkinScoreDisplay() {
    skinScoreEl.textContent = "Score dengan skin ini: " + scoreWithCurrentSkin;
  }

// Inisialisasi awal
  scoreEl.textContent = 'Score: ' + score;
  updateSkinScoreDisplay();
  const selectedSkin = ownedSkins.find(s => s.name === currentSkin) || defaultSkin;
  clickImg.src = selectedSkin.img;
  updateInventory();

// --- Statistik Tracker ---
let totalClicks = parseInt(localStorage.getItem("totalClicks") || "0");
let totalCritical = parseInt(localStorage.getItem("totalCritical") || "0");
let skinUsage = JSON.parse(localStorage.getItem("skinUsage") || "{}");

function updateStatsUI() {
  document.getElementById("total-clicks").textContent = totalClicks;
  document.getElementById("total-critical").textContent = totalCritical;
  let fav = Object.entries(skinUsage).sort((a,b) => b[1]-a[1])[0];
  document.getElementById("fav-skin").textContent = fav ? fav[0] : "-";
  let avg = totalClicks > 0 ? (score / totalClicks).toFixed(2) : 0;
  document.getElementById("avg-score").textContent = avg;
}

updateStatsUI();


let funnyQuotes = [
  "UMA MUSIK!üî•",
  "ALAMAKKü§¶‚Äç‚ôÇÔ∏è",
  "MAHIR BANAR KANAKAN NI!üò°",
  "KIKUKK"
];
let quoteCounter = 0;

function showFunnyQuote() {
  const quote = funnyQuotes[Math.floor(Math.random() * funnyQuotes.length)];
  const el = document.createElement('div');
  el.textContent = quote;
  el.style.position = 'absolute';
  el.style.left = (clickImg.getBoundingClientRect().left + 30) + 'px';
  el.style.top = (clickImg.getBoundingClientRect().top - 60) + 'px';
  el.style.fontSize = '16px';
  el.style.color = '#ffea00';
  el.style.textShadow = '0 0 6px #ffea00, 0 0 12px #ffaa00';
  el.style.fontFamily = '"Press Start 2P", monospace';
  el.style.animation = 'fadeOut 1.2s forwards';
  document.body.appendChild(el);
  setTimeout(() => el.remove(), 1200);
}


function showGifPopup() {
  const gif = document.createElement('img');
  gif.src = "GIFfibri.gif"; // Replace with your own if needed
  gif.style.position = 'fixed';
  gif.style.bottom = "20px";
gif.style.right = "20px";
gif.style.top = "";
gif.style.left = "";
gif.style.transform = "";
  gif.style.width = '200px';
  gif.style.zIndex = 9999;
  gif.style.border = '4px solid white';
  gif.style.borderRadius = '12px';
  gif.style.boxShadow = '0 0 20px rgba(255,255,255,0.6)';
  document.body.appendChild(gif);
  setTimeout(() => gif.remove(), 8000);
}

</script>
</body>
</html>
